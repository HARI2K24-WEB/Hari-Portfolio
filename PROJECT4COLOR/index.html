<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RGB & CMY Color Mixer</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      display: flex;
      height: 100vh;
      background: #fff;
    }
    .left {
      width: 40%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 40px;
      border-right: 2px solid #ddd;
    }
    .wheel {
      width: 160px;
      height: 160px;
      border-radius: 50%;
      cursor: crosshair;
    }
    .right {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      padding: 20px;
      gap: 20px;
    }
    .top-boxes {
      display: flex;
      gap: 40px;
    }
    .color-box {
      width: 150px;
      height: 100px;
      border: 2px solid #000;
      border-radius: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      color: #40444d;
      background: #fff;
    }
    .result-box {
      width: 300px;
      height: 150px;
      border: 2px solid #000;
      border-radius: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      color: #40444d;
      background: #fff;
    }
  </style>
</head>
<body>
  <!-- Left side: Color Wheels -->
  <div class="left">
    <canvas class="wheel" id="rgbWheel"></canvas>
    <canvas class="wheel" id="cmyWheel"></canvas>
  </div>

  <!-- Right side: Result Panels -->
  <div class="right">
    <div class="top-boxes">
      <div class="color-box" id="rgbBox">RGB Box</div>
      <div class="color-box" id="cmyBox">CMY Box</div>
    </div>
    <div class="result-box" id="resultBox">Result</div>
  </div>

  <script>
    const rgbBox = document.getElementById("rgbBox");
    const cmyBox = document.getElementById("cmyBox");
    const resultBox = document.getElementById("resultBox");

    let rgbColor = null;
    let cmyColor = null;

    function rgbToHex(r, g, b) {
      return (
        "#" +
        [r, g, b]
          .map(x => {
            const hex = x.toString(16);
            return hex.length === 1 ? "0" + hex : hex;
          })
          .join("")
      );
    }

    function drawWheel(canvas, type) {
      const ctx = canvas.getContext("2d");
      const radius = canvas.width / 2;
      const gradient = ctx.createConicGradient(0, radius, radius);

      if (type === "rgb") {
        gradient.addColorStop(0, "red");
        gradient.addColorStop(1/3, "green");
        gradient.addColorStop(2/3, "blue");
        gradient.addColorStop(1, "red");
      } else {
        gradient.addColorStop(0, "cyan");
        gradient.addColorStop(1/3, "magenta");
        gradient.addColorStop(2/3, "yellow");
        gradient.addColorStop(1, "cyan");
      }

      ctx.fillStyle = gradient;
      ctx.beginPath();
      ctx.arc(radius, radius, radius, 0, 2 * Math.PI);
      ctx.fill();
    }

    function pickColor(e, canvas, type) {
      const rect = canvas.getBoundingClientRect();
      const ctx = canvas.getContext("2d");

      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;

      const pixel = ctx.getImageData(x, y, 1, 1).data;
      const r = pixel[0], g = pixel[1], b = pixel[2];

      if (pixel[3] > 0) {
        const hex = rgbToHex(r, g, b);

        if (type === "rgb") {
          rgbBox.style.backgroundColor = hex;
          rgbBox.textContent = hex;
          rgbColor = [r, g, b];
        } else {
          cmyBox.style.backgroundColor = hex;
          cmyBox.textContent = hex;
          cmyColor = [r, g, b];
        }

        if (rgbColor && cmyColor) {
          const mix = [
            Math.round((rgbColor[0] + cmyColor[0]) / 2),
            Math.round((rgbColor[1] + cmyColor[1]) / 2),
            Math.round((rgbColor[2] + cmyColor[2]) / 2)
          ];
          const mixHex = rgbToHex(...mix);
          resultBox.style.backgroundColor = mixHex;
          resultBox.textContent = "Mix: " + mixHex;
        }
      }
    }

    const rgbWheel = document.getElementById("rgbWheel");
    const cmyWheel = document.getElementById("cmyWheel");

    rgbWheel.width = rgbWheel.height = 160;
    cmyWheel.width = cmyWheel.height = 160;

    drawWheel(rgbWheel, "rgb");
    drawWheel(cmyWheel, "cmy");

    rgbWheel.addEventListener("click", e => pickColor(e, rgbWheel, "rgb"));
    cmyWheel.addEventListener("click", e => pickColor(e, cmyWheel, "cmy"));
  </script>
</body>
</html>
